<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>å–®å­—è¤‡ç¿’å™¨ï¼ˆéš¨æ©Ÿé †åº + é‡è¤‡éŒ¯é¡Œï¼‰</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .card { margin-top: 20px; font-size: 24px; }
    #answer { margin-top: 10px; }
  </style>
</head>
<body>
  <h1>å–®å­—è¤‡ç¿’å™¨</h1>
  <textarea id="wordInput" placeholder="è«‹è¼¸å…¥å–®å­—ï¼Œæ¯è¡Œä¸€çµ„ï¼šå¾·æ–‡ï¼šä¸­æ–‡" rows="6" cols="30"></textarea><br>
  <button onclick="startReview()">é–‹å§‹è¤‡ç¿’</button>

  <div class="card" id="questionArea" style="display:none;">
    <p id="questionText"></p>
    <input id="answer" placeholder="è¼¸å…¥ç­”æ¡ˆ" />
    <button onclick="checkAnswer()">æª¢æŸ¥</button>
    <p id="result"></p>
  </div>

  <script>
    let allCards = [];    // æ‰€æœ‰å–®å­—å¡
    let reviewList = [];  // æ­£åœ¨è¤‡ç¿’çš„å¡ç‰‡ï¼ˆå«éŒ¯é¡Œï¼‰
    let currentCard = null;

    // è®€å–èˆŠè³‡æ–™
    window.onload = () => {
      const saved = localStorage.getItem('vocab');
      if (saved) document.getElementById('wordInput').value = saved;
    };

    // æ´—ç‰Œå‡½å¼ï¼ˆFisherâ€“Yates Shuffleï¼‰
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function startReview() {
      const rawInput = document.getElementById('wordInput').value.trim();
      localStorage.setItem('vocab', rawInput); // å„²å­˜è¼¸å…¥

      const lines = rawInput.split('\n');
      allCards = lines.map(line => {
        const [en, zh] = line.split('ï¼š');
        return { en: en.trim(), zh: zh.trim() };
      });

      // åˆå§‹åŒ–è¤‡ç¿’æ¸…å–®ä¸¦æ´—ç‰Œ
      reviewList = shuffle([...allCards]);
      document.getElementById('questionArea').style.display = 'block';
      document.getElementById('result').innerText = "";
      showQuestion();
    }

    function showQuestion() {
      if (reviewList.length === 0) {
        document.getElementById('questionText').innerText = "ğŸ‰ è¤‡ç¿’å®Œç•¢ï¼";
        document.getElementById('answer').style.display = 'none';
        return;
      }

      currentCard = reviewList[0]; // å–å‡ºç¬¬ä¸€å€‹
      document.getElementById('questionText').innerText = `è«‹è¼¸å…¥ã€Œ${currentCard.zh}ã€çš„å¾·æ–‡ï¼š`;
      document.getElementById('answer').value = "";
      document.getElementById('answer').style.display = 'inline';
    }

    function checkAnswer() {
      const userAnswer = document.getElementById('answer').value.trim().toLowerCase();
      const correct = currentCard.en.toLowerCase();

      if (userAnswer === correct) {
        document.getElementById('result').innerText = "âœ… æ­£ç¢ºï¼";
        reviewList.shift(); // ç§»é™¤é€™é¡Œ
      } else {
        document.getElementById('result').innerText = `âŒ éŒ¯äº†ï¼Œæ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š${currentCard.en}`;
        /
